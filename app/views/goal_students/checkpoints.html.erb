<h2>Choose your Checkpoints</h2>

<h2>Goal for Term <%= @gs.term + 1 %> &emsp; <strong><%= @gs.goal.name %></strong></h2>

<%= form_tag update_checkpoints_goal_student_path do %>
    <% @gs.checkpoints_in_order.each_with_index do |checkpoint, index| %>
        <h3>Checkpoint <%= index+1 %></h3>
        <% this_due_date = Date.strptime(@gs.seminar.checkpoint_due_dates[@gs.term][index], "%m/%d/%Y") %>
        <% these_actions = @gs.goal.actions[index] %>
        <% if these_actions.count > 1 %>
            <% if this_due_date < Date.today %>
                <h5 id="past_due_<%= index %>">The due date for this checkpoint has already passed.</h5></br>
            <% elsif this_due_date - 2.days <= Date.today %>
                <h5 id="too_soon_<%= index %>">The due date for this checkpoint is too soon. The checkpoint cannot be changed.</h5></br>
            <% else %>
                <div id="action_picker_<%= index %>">
                    <%= select("syl[#{checkpoint.id}]", "action", these_actions.collect {|act| [@gs.action_with_target(act), act]}, :class => "select_box left_box") %>
                </div>
            <% end %>
        <% else %>
            <h5 id="statement_<%= index %>"><%= checkpoint.statement %></h5>
        <% end %>
    <% end %>
    </br>
    </br>
    <%= submit_tag "Save These Checkpoints", :class => "btn btn-primary" %>

<% end %>