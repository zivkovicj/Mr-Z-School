<!-- Don't include options for pre-Reqs that this assigment is already a pre-req for -->
<!-- That would create an an impossible loop -->


<%
=begin %>
<div id="dialog2" title="Objective Pre-Requisites">
  Students will not be assigned an objective until after they have passed all pre-requisites for that objective.
</div>
<%
=end %>

<%= render 'shared/pre_req_dialog' %>
<%= render 'shared/back-link' %>
<%= render 'shared/headline' %>

<div class="row">
  
    <%= form_for(@objective) do |a| %>
    
      <%= render 'shared/error_messages', object: @objective %>
      
      <div class="singleOption">
        </br>
        <%= render 'shared/name_in_form', form: a %>
        <%= render 'shared/user_and_extent', form: a %>
      </div>
      </br>
      
      <% if @assign_permission != "admin" %>
        <div class="singleOption" id="seminars_to_include">
          <h2>Classes To Include This Objective</h2>
          <table>
          <thead>
            <tr>
              <td>Include?</td>
              <td>Class</td>
            </tr>
          </thead>
            <%= a.collection_check_boxes(:seminar_ids, current_user.own_seminars.order(:name), :id, :name) do |b| %>
              <% classType = "none" %>
              <% classType = "boulderfist" if (!@objective.seminar_ids.include?(b.object.id) && @objective.preassigns.count > 0) %>
              <tr>
                <td width="20%"><%= b.check_box(:class => classType, :id => b.object.name) %></td>
                <td><%= b.label %></td>
              </tr>
            <% end %>
          </table>
        </div>
        <br/>
      <% end %>
      
      <%= render :partial => 'shared/include_checks', 
        :locals => {:list_for_checks => @pre_req_list,
          :check_box_name => "objective[preassign_ids][]",
          :inclusion_var => @objective.preassigns, :boulderfist => true,
          :include_word => "pre-requisite", :include_on => "for this objective",
          :model_name => "objective"} %>
      
      <%= render :partial => 'shared/include_checks', 
        :locals => {:list_for_checks => @labels,
          :check_box_name => "objective[label_ids][]",
          :inclusion_var => @objective.labels, :boulderfist => false,
          :include_word => "labels", :include_on => "on the assessment for this objective",
          :model_name => "objective"} %>
      
      <br/><br/>
      <%# @objective.preassign_ids = [] %>
      <%= a.submit yield(:button_text), class: "btn btn-primary" if @assign_permission !="other" %>
    <% end %>
    
</div>